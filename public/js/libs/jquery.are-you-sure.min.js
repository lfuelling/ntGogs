/*!
 * jQuery Plugin: Are-You-Sure (Dirty Form Detection)
 * https://github.com/codedance/jquery.AreYouSure/
 *
 * Copyright (c) 2012-2014, Chris Dance and PaperCut Software http://www.papercut.com/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Author:  chris.dance@papercut.com
 * Version: 1.9.0
 * Date:    13th August 2014
 */
!function(e){e.fn.areYouSure=function(t){const n=e.extend({message:"You have unsaved changes!",dirtyClass:"dirty",change:null,silent:!1,addRemoveFieldsMarksDirty:!1,fieldEvents:"change keyup propertychange input",fieldSelector:":input:not(input[type=submit]):not(input[type=button])"},t),i=function(t){if(t.hasClass("ays-ignore")||t.hasClass("aysIgnore")||t.attr("data-ays-ignore")||void 0===t.attr("name"))return null;if(t.is(":disabled"))return"ays-disabled";let n,i=t.attr("type");switch(t.is("select")&&(i="select"),i){case"checkbox":case"radio":n=t.is(":checked");break;case"select":n="",t.find("option").each(function(t){const i=e(this);i.is(":selected")&&(n+=i.val())});break;default:n=t.val()}return n},s=function(e){e.data("ays-orig",i(e))},r=function(t){const s=function(e){const t=e.data("ays-orig");return void 0!==t&&i(e)!==t},r=e(this).is("form")?e(this):e(this).parents("form");if(s(e(t.target)))return void o(r,!0);const a=r.find(n.fieldSelector);if(n.addRemoveFieldsMarksDirty){if(r.data("ays-orig-field-count")!==a.length)return void o(r,!0)}let c=!1;a.each(function(){const t=e(this);if(s(t))return c=!0,!1}),o(r,c)};function a(t){const i=t.find(n.fieldSelector);e(i).each(function(){s(e(this))}),e(i).unbind(n.fieldEvents,r),e(i).bind(n.fieldEvents,r),t.data("ays-orig-field-count",e(i).length),o(t,!1)}function o(e,t){const i=t!==e.hasClass(n.dirtyClass);e.toggleClass(n.dirtyClass,t),i&&(n.change&&n.change.call(e,e),t&&e.trigger("dirty.areYouSure",[e]),t||e.trigger("clean.areYouSure",[e]),e.trigger("change.areYouSure",[e]))}const c=function(){const t=e(this),i=t.find(n.fieldSelector);e(i).each(function(){const t=e(this);t.data("ays-orig")||(s(t),t.bind(n.fieldEvents,r))}),t.trigger("checkform.areYouSure")},d=function(){a(e(this))};return n.silent||window.aysUnloadSet||(window.aysUnloadSet=!0,e(window).bind("beforeunload",function(){if(0!==e("form").filter("."+n.dirtyClass).length){if(navigator.userAgent.toLowerCase().match(/msie|chrome/)){if(window.aysHasPrompted)return;window.aysHasPrompted=!0,window.setTimeout(function(){window.aysHasPrompted=!1},900)}return n.message}})),this.each(function(t){if(!e(this).is("form"))return;const i=e(this);i.submit(function(){i.removeClass(n.dirtyClass)}),i.bind("reset",function(){o(i,!1)}),i.bind("rescan.areYouSure",c),i.bind("reinitialize.areYouSure",d),i.bind("checkform.areYouSure",r),a(i)})}}(jQuery);
